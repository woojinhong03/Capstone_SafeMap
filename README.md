# AR기반 등하교 서포트 서비스

## 📋 프로젝트 개요

**AR기반 등하교 서포트 서비스**는 초등학생을 위한 AR 기반 안전 등하교 내비게이션 앱입니다. 맞벌이 가정 증가로 혼자 등하교하는 아이들이 늘어나고 있지만, 아이들은 도로 위험 인지 능력이 부족해 사고나 범죄에 쉽게 노출될 수 있습니다. 본 프로젝트는 AR 내비게이션과 게임 요소, AI 기반 위험도 분석을 결합해 아이 스스로 안전한 경로를 따라가도록 유도하는 앱 서비스입니다.

## 🎯 개발 목적

- AI를 통한 지역별 위험도 분석으로 안전한 경로 도출
- AR 기술과 게임(코인) 요소를 활용한 직관적이고 재미있는 길 안내
- 아이의 능동적 참여를 유도하는 서비스 (기존 수동적 위치 추적 서비스와 차별화)
- 보호자에게는 안심할 수 있는 간접 관리 기능 제공

## 🔧 주요 기능

### 1. AI 기반 위험도 분석 시스템
- 공공데이터(교통사고 등)를 분석하여 위험도를 산출
- Random Forest 알고리즘을 활용한 위험도 예측 모델
- 사고 심각도, 보행자 관련성, 시간대별 가중치 적용

### 2. 안전 경로 탐색
- 다익스트라 알고리즘을 활용한 최적 경로 탐색
- 위험 지역에 가중치를 부여하여 안전한 경로 도출
- **원래 최단 경로**: 거리만 고려한 일반적인 최단 경로
- **안전 최적화 경로**: 위험도를 고려한 안전 우선 경로

### 3. AR 기반 경로 시각화
- Unity AR Foundation 및 ARCore 기반 AR 구현
- 실제 거리와 방향에 맞는 AR 코인 배치
- 사용자가 코인에 접근 시 자동 수거 및 피드백 제공
- 게임 요소를 통한 직관적이고 재미있는 길 안내

### 4. 상세 좌표 데이터 생성
- 1m 간격 정밀 좌표 생성
- JSON 형태의 구조화된 데이터 제공
- Unity에서 활용 가능한 노드 좌표 형태로 출력

## 🛠️ 기술 스택

### AI 및 데이터 분석
- **Python 3.x**: 메인 개발 언어
- **Pandas**: 데이터 처리 및 분석
- **NumPy**: 수치 계산
- **Scikit-learn**: 머신러닝 모델 구축 (Random Forest)

### 경로 분석 및 지도
- **OSMnx**: 도로 네트워크 데이터 처리
- **NetworkX**: 그래프 기반 다익스트라 경로 탐색
- **Folium**: 웹 기반 지도 시각화 (프로토타입용)
- **Geopy**: 지리적 거리 계산

### AR 및 모바일 개발
- **Unity**: AR 앱 개발 플랫폼
- **AR Foundation**: Unity AR 프레임워크
- **ARKit (iOS) / ARCore (Android)**: 플랫폼별 AR 구현
- **ARCore API**: AR 생성

### API 연동
- **Kakao Map API**: 주소-좌표 변환
- **python-dotenv**: 환경변수 관리

## 📁 프로젝트 구조

```
AR기반_등하교_서포트_서비스/
├── integrated_risk_analyzer.py    # 메인 AI 분석 시스템 (Python)
├── score.py                      # 점수 계산 관련 모듈
├── 교통사고다발구역.csv            # 교통사고 공공데이터
├── .env                          # API 키 설정 (생성 필요)
├── data/                         # 출력 데이터 폴더
│   ├── original_route_map.html   # 원래 최단 경로 지도 (비교용)
│   ├── route_map.html           # 안전 최적화 경로 지도
│   ├── route_coords.json        # 안전 경로 좌표 (Unity 연동용)
│   └── detailed_route_1m.json   # 1m 간격 상세 좌표 (AR 코인 배치용)
├── danger_centers_output.json    # 위험지역 분석 결과
└── README.md
```

**Unity AR 프로젝트** (별도 개발 예정)
- AR Foundation 기반 모바일 앱
- Python 시스템에서 생성된 JSON 데이터 연동
- AR 코인 배치 및 사용자 인터랙션 구현

## 🚀 설치 및 실행

### 1. 필요 라이브러리 설치

```bash
pip install pandas numpy scikit-learn folium osmnx networkx geopy requests python-dotenv
```

### 2. 환경 설정

프로젝트 루트 디렉토리에 `.env` 파일 생성:

```
Kakao_REST_API_key=YOUR_KAKAO_API_KEY
```

### 3. 실행

```bash
python integrated_risk_analyzer.py
```

### 4. 사용 방법

1. **출발지 입력** (예: 종각역)
2. **도착지 입력** (예: 대동세무고)
3. **AI 시스템이 자동으로 위험도 분석 및 안전 경로 생성**
   - 공공데이터 기반 위험도 계산
   - 다익스트라 알고리즘으로 최적 경로 탐색
4. **결과물 확인**
   - 웹 브라우저에서 두 가지 경로 지도 비교
   - Unity 연동을 위한 JSON 데이터 생성

## 📊 출력 결과

### 생성되는 파일들

1. **위험도 분석**
   - `danger_centers_output.json`: 격자별 위험도 데이터

2. **원래 최단 경로**
   - `data/original_route_map.html`: 거리 우선 경로 지도

3. **안전 최적화 경로**
   - `data/route_map.html`: 안전성 고려 경로 지도
   - `data/route_coords.json`: 경로 노드 좌표
   - `data/detailed_route_1m.json`: 1m 간격 상세 좌표

## 🔍 알고리즘 특징

### 위험도 계산 방식
- 반경 500m 내 사고 데이터 수집
- 사고 심각도별 가중치 적용 (사망: 10, 중상: 4, 경상: 1, 부상신고: 2)
- 보행자 관련 사고 3배 가중치
- 야간/주말 사고 추가 고려

### 경로 최적화
- 기본 거리 기반 경로 탐색
- 위험도 점수에 따른 가중치 적용
- 500점 이상 고위험 지역 회피 우선
- 거리 효율성과 안전성의 균형 고려

## 📱 시스템 아키텍처

### 개발 단계
1. **아이가 목적지를 설정합니다**
2. **AI가 교통사고 데이터를 바탕으로 위험도를 계산합니다**
3. **위험도를 반영한 경로를 다익스트라 알고리즘으로 생성합니다**
4. **해당 경로 위에 AR 코인을 배치하여, 아이가 따라갈 수 있도록 안내합니다**

### Python 백엔드 ↔ Unity AR 앱 연동
- Python에서 생성된 `detailed_route_1m.json` 파일을 Unity에서 불러옴
- 1m 간격 좌표 데이터를 기반으로 실제 거리와 방향에 맞는 AR 코인 배치
- 사용자가 코인에 접근하면 자동 수거 및 오디오·시각적 피드백 제공

## 🎓 캡스톤 디자인 정보

- **학과**: 인공지능학과
- **지도교수**: 김범성 교수
- **프로젝트명**: AR기반 등하교 서포트 서비스
- **수행기간**: 2025년 3월 ~ 2025년 11월
- **참여학생**:
  - 장평화 (202263018)
  - 김강민 (202263044)
  - 김동윤 (202463006)
  - 김병윤 (202263001)
  - 최혁수 (202263061)
  - 채한빈 (202263020)
  - 홍우진 (202263042)

## 📈 기대효과 및 활용방안

### 직접적 효과
- 아이 스스로 안전한 길을 인식하고 따라가도록 유도
- 어린이 보행 안전에 대한 자율성과 주체성 향상
- 기존 수동적 위치 추적 서비스와 차별화된 능동적 안전 경험 제공

### 확장 가능성
- **고령자, 발달장애인** 등 보행 약자에게도 확장 적용
- **교육기관, 공공기관** 등에서 아동 안전 기술로 활용
- **사회 전반의 안전 문화 확산**과 보행자 중심의 기술 환경 조성에 기여

## 🤝 기여 방법

이 프로젝트는 캡스톤 디자인 과제로 개발되었습니다.
개선 사항이나 버그 발견 시 이슈를 등록해 주세요.

## 📄 라이선스

이 프로젝트는 교육용 목적으로 개발되었습니다.

---

**개발자**: 인공지능학과 A1조 캡스톤 디자인 팀

