# SafeMap: 보행자 안전 경로 분석 시스템

## 📋 프로젝트 개요

**SafeMap**은 교통사고 데이터를 기반으로 보행자 위험도를 예측하고, 안전한 경로를 제안하는 시스템입니다. 머신러닝 기법과 지도 시각화 기술을 활용하여 사용자에게 최적의 안전 경로를 제공합니다.

## 🎯 개발 목적

- 교통사고 데이터 분석을 통한 보행자 위험지역 식별
- 머신러닝 기반 위험도 예측 모델 구축
- 안전성을 고려한 경로 추천 시스템 개발
- 실시간 경로 시각화 및 비교 분석 제공

## 🔧 주요 기능

### 1. 위험도 예측 시스템
- 교통사고 데이터 기반 위험도 분석
- Random Forest 알고리즘을 활용한 예측 모델
- 사고 심각도, 보행자 관련성, 시간대별 가중치 적용

### 2. 경로 분석 및 시각화
- **원래 최단 경로**: 거리만 고려한 일반적인 최단 경로
- **안전 최적화 경로**: 위험도를 고려한 안전 우선 경로
- 두 경로의 비교 분석을 통한 안전성 검증

### 3. 상세 좌표 데이터 생성
- 1m 간격 정밀 좌표 생성
- JSON 형태의 구조화된 데이터 제공
- 추가 분석 및 활용을 위한 데이터 내보내기

### 4. 대화형 지도 시각화
- Folium 기반 웹 지도 생성
- 위험지역 색상 구분 표시
- 경로별 시각적 비교 가능

## 🛠️ 기술 스택

### 데이터 처리 및 분석
- **Python 3.x**: 메인 개발 언어
- **Pandas**: 데이터 처리 및 분석
- **NumPy**: 수치 계산
- **Scikit-learn**: 머신러닝 모델 구축

### 지도 및 경로 분석
- **OSMnx**: 도로 네트워크 데이터 처리
- **NetworkX**: 그래프 기반 경로 탐색
- **Folium**: 웹 기반 지도 시각화
- **Geopy**: 지리적 거리 계산

### API 연동
- **Kakao Map API**: 주소-좌표 변환
- **python-dotenv**: 환경변수 관리

## 📁 프로젝트 구조

```
SafeMap/
├── integrated_risk_analyzer.py    # 메인 분석 시스템
├── score.py                      # 점수 계산 관련 모듈
├── 교통사고다발구역.csv            # 교통사고 데이터
├── .env                          # API 키 설정 (생성 필요)
├── data/                         # 출력 데이터 폴더
│   ├── original_route_map.html   # 원래 경로 지도
│   ├── route_map.html           # 안전 경로 지도
│   ├── route_coords.json        # 안전 경로 좌표
│   └── detailed_route_1m.json   # 1m 간격 상세 좌표
├── danger_centers_output.json    # 위험지역 분석 결과
└── README.md
```

## 🚀 설치 및 실행

### 1. 필요 라이브러리 설치

```bash
pip install pandas numpy scikit-learn folium osmnx networkx geopy requests python-dotenv
```

### 2. 환경 설정

프로젝트 루트 디렉토리에 `.env` 파일 생성:

```
Kakao_REST_API_key=YOUR_KAKAO_API_KEY
```

### 3. 실행

```bash
python integrated_risk_analyzer.py
```

### 4. 사용 방법

1. 출발지 입력 (예: 종각역)
2. 도착지 입력 (예: 대동세무고)
3. 시스템이 자동으로 분석 및 경로 생성
4. 웹 브라우저에서 생성된 지도 확인

## 📊 출력 결과

### 생성되는 파일들

1. **위험도 분석**
   - `danger_centers_output.json`: 격자별 위험도 데이터

2. **원래 최단 경로**
   - `data/original_route_map.html`: 거리 우선 경로 지도

3. **안전 최적화 경로**
   - `data/route_map.html`: 안전성 고려 경로 지도
   - `data/route_coords.json`: 경로 노드 좌표
   - `data/detailed_route_1m.json`: 1m 간격 상세 좌표

## 🔍 알고리즘 특징

### 위험도 계산 방식
- 반경 500m 내 사고 데이터 수집
- 사고 심각도별 가중치 적용 (사망: 10, 중상: 4, 경상: 1, 부상신고: 2)
- 보행자 관련 사고 3배 가중치
- 야간/주말 사고 추가 고려

### 경로 최적화
- 기본 거리 기반 경로 탐색
- 위험도 점수에 따른 가중치 적용
- 500점 이상 고위험 지역 회피 우선
- 거리 효율성과 안전성의 균형 고려

## 🎓 캡스톤 디자인 정보

- **팀명**: A1조
- **프로젝트명**: SafeMap - 보행자 안전 경로 분석 시스템
- **개발기간**: 2024년 ~ 2025년
- **주요 기술**: 머신러닝, 지리정보시스템, 웹 시각화

## 📈 향후 개선 계획

1. **실시간 데이터 연동**: 실시간 교통상황 반영
2. **모바일 앱 개발**: 사용자 접근성 향상
3. **사용자 피드백 시스템**: 경로 품질 개선
4. **다양한 교통수단 지원**: 자전거, 대중교통 등
5. **위험 요소 확장**: 날씨, 시간대, 인구밀도 등

## 🤝 기여 방법

이 프로젝트는 캡스톤 디자인 과제로 개발되었습니다.
개선 사항이나 버그 발견 시 이슈를 등록해 주세요.

## 📄 라이선스

이 프로젝트는 교육용 목적으로 개발되었습니다.

---

**개발자**: A1조 캡스톤 디자인 팀
**마지막 업데이트**: 2024년 9월 19일